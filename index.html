<!DOCTYPE html>
<html>
<head>
  <title>Spline Editor</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
  <script src="sketch.js"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Main App Controls -->
  <div class="controls">
    <div class="main-content">
      <!-- Spline Controls Sidebar -->
      <div id="spline-controls" class="spline-controls">
        <h3>Selected Spline Control</h3>
        
        <!-- Spline Controls -->
        <div class="control-group">
          <label for="selectedStartFrame">Start Frame:</label>
          <input type="number" id="selectedStartFrame" min="0" max="9999" step="1" value="0">
        </div>
        <div class="control-group">
          <label for="selectedDuration">Seconds:</label>
          <input type="number" id="selectedDuration" min="0.1" max="60" step="0.1" value="5">
        </div>
        <!-- UPDATED: Size control replaced with Size X and Size Y -->
        <div class="control-group">
          <label>Size:</label>
          <div class="size-inputs">
            <input type="number" id="selectedSizeX" min="1" max="1000" value="30" title="Size X">
            <input type="number" id="selectedSizeY" min="1" max="1000" value="30" title="Size Y">
          </div>
        </div>
        <div class="control-group">
          <label for="selectedType">Shape:</label>
          <select id="selectedType">
            <option value="circle">Circle</option>
            <option value="square">Square</option>
            <option value="triangle">Triangle</option>
          </select>
        </div>
        <div class="control-group">
          <label for="selectedFillColor">Fill:</label>
          <input type="color" id="selectedFillColor" value="#ffffff">
        </div>
        <div class="control-group">
          <label for="selectedStrokeColor">Border:</label>
          <input type="color" id="selectedStrokeColor" value="#000000">
        </div>
        <div class="control-group">
          <label for="selectedStrokeWeight">Width:</label>
          <input type="number" id="selectedStrokeWeight" min="0" max="10" step="0.25" value="1">
        </div>
        <div class="control-group">
          <label for="selectedTension">Tension:</label>
          <input type="number" id="selectedTension" min="0" max="1" step="0.1" value="0">
        </div>
        <!-- Easing function dropdown -->
        <div class="control-group">
          <label for="selectedEasing">Easing:</label>
          <select id="selectedEasing">
            <option value="linear">Linear</option>
            <option value="easeIn">Ease-in</option>
            <option value="easeOut">Ease-out</option>
            <option value="easeInOut">Ease-in-out</option>
          </select>
        </div>
        
        <!-- Divider above Canvas Settings -->
        <div class="section-divider">Canvas Settings</div>
        
        <!-- Canvas Controls -->
        <div class="control-group">
          <label for="canvasWidth">Width:</label>
          <input type="number" id="canvasWidth" min="100" max="2000" value="1000">
        </div>
        <div class="control-group">
          <label for="canvasHeight">Height:</label>
          <input type="number" id="canvasHeight" min="100" max="2000" value="562">
        </div>
        <div class="control-group">
          <button id="updateCanvasSize">Update Canvas</button>
        </div>
        
        <div class="control-group">
        <button id="resetCanvasSize">Reset Canvas Size</button>
      </div>
        
        <!-- New divider below Update Canvas button -->
        <div class="section-divider">Background Image</div>
        
        <!-- Image Controls -->
        <div class="control-group">
          <input type="file" id="bgImage" accept="image/*">
        </div>
        <div class="control-group">
          <button id="clearBg">Clear Background</button>
        </div>
      </div>
      
      <div class="canvas-area">
        <!-- The p5.js canvas and export overlay will be placed here -->
        <div id="canvas-container">
            <!-- ** MOVED: Export Overlay UI is now inside the canvas container ** -->
            <div id="export-overlay">
              <div class="export-dialog">
                <h3 id="export-title">Creating Video...</h3>
                <div class="progress-bar-container">
                  <div id="progress-bar-fill"></div>
                </div>
                <p id="export-percentage">0%</p>
                <p id="export-frame-count">Frame 0 of 0</p>
              </div>
            </div>
        </div>
        
        <!-- Spline Management Buttons -->
      <div class="spline-management">
        <button id="newSpline">New Spline</button>
        <button id="deleteSpline">Delete Spline</button>
        <button id="addPoint">Add Point</button>
        <button id="removePoint">Remove Point/Anchor</button>
        <button id="addShape">Add Anchor</button>
        <button id="cloneItem">Clone</button>
        <button id="clearAll">Clear All</button>

        <!-- Spacer div to push the following buttons to the far right -->
        <div class="spacer"></div>
        
        <!-- New Preview Control Buttons -->
        <button id="playOnce">Play Once</button>
        <button id="loopPreview">Loop Preview: ON</button>
      </div>
        
        <!-- Export Controls -->
        <div class="export-container">
          <div class="export-left-panel">
            <div class="export-settings">
              <div class="control-group">
                <label for="exportFPS">Export FPS:</label>
                <input type="number" id="exportFPS" min="1" max="120" value="16">
              </div>
              <div class="control-group">
                <label for="exportSeconds">Length (s):</label>
                <input type="number" id="exportSeconds" min="0.1" max="300" step="0.1" value="5">
              </div>
            </div>
            <div class="export-controls">
              <button id="exportVideo">Export Video</button>
              <button id="cancelExport">Cancel Export</button>
            </div>
          </div>
          
          <div class="info-box">
             <b>Tips:</b><br>
             <a href="https://github.com/WhatDreamsCost/Spline-Path-Control" target="_blank">Click here to see guides, workflows, updates and more</a><br>
             • You can drag and drop images on the canvas.<br>
             • Lower 'Seconds' to make shapes move faster.<br>
             • Raise 'Seconds' to make shapes move slower.<br>
          </div>
        </div>
      </div>
    </div>
  </div>

</body>
</html>
